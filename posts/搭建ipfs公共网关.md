---
title: 搭建ipfs公共网关
date: 2020-05-06 18:59:03
tags: 
- ipfs
- go-ipfs
- gateway
---

本文基于go-ipfs写作

---

## go-ipfs的三个端口

go-ipfs在建立node之后主要监听了三个端口
- 0.0.0.0：4001 直通外网的4001端口，用于节点连接和数据交换
- 127.0.0.1:5001 用于API和webui，内网
- 127.0.0.1:8080 本地网关

## 原理

需要让8080端口的网关直接监听外部
`ipfs coonfig edit`
其中gateway
修改成
```
0.0.0.0:8080
```
这样就可以直接监听外部的请求了
事实上成为了一个公共网关

## 问题

这样之后，当访问ipfs的网站时，根目录指向似乎会错误，不是文件夹而是0.0.0.0:8080/
会造成网站本地资源无法读取
